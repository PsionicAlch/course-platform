{{ template "admin" .}}

{{ define "meta-tags" }}
  {{/* TODO: Generate SEO Tags with ChatGPT. */}}
{{ end }}

{{ define "title" }}
  <title>Authors - PsionicAlch</title>
{{ end }}

{{ define "body" }}
  <section class="admin-container">
    <div class="admin-header" x-data="{ modalOpen: false }">
      <h2>Authors Administration</h2>

      <div class="admin-header-actions">
        <form action="/">
          <input type="text" name="search-term" id="search-term" class="shadow-sm" placeholder="Search terms...">
        </form>

        <button class="btn btn-blue shadow-sm" x-on:click="modalOpen = true">Add New Author</button>
      </div>

      <template x-teleport="body">
        <section class="admin-modal" x-show="modalOpen">
          <div class="admin-modal-container shadow-sm">
            <div class="admin-modal-header">
              <h2>Add New Author</h2>
            </div>

            <div class="admin-modal-body">
              <form action="/">
                <div class="form-control">
                  <select name="user" id="user" class="shadow-sm">
                    <option value="">No Author</option>
                    <option value="01A8E54F1RYQJYQGF4ZTWM16V8">John Doe</option>
                    <option value="01A8E8J7E2YMG98NKF3TQ84G1H">Jane Smith</option>
                    <option value="01A8EC3WZ4FJYP62PG6T0M5CBX">Michael Johnson</option>
                    <option value="01A8F2QW0ZGM3WXNQHC9R1SVDN">Emily Brown</option>
                    <option value="01A8F8YRQ7JQF8X0XCHN5WT4F9">Chris Davis</option>
                    <option value="01A8FESM8ZGFKP0YQDJ2XN9HJB">Sarah Miller</option>
                  </select>
                </div>

                <div class="admin-modal-actions">
                  <button
                    x-on:click.prevent="modalOpen = false"
                    class="btn btn-gray shadow-sm"
                  >
                    Cancel
                  </button>

                  <button type="submit" class="btn btn-blue shadow-sm">Add Author</button>
                </div>
              </form>
            </div>
          </div>
        </section>
      </template>
    </div>

    <hr>

    <div class="admin-body shadow-sm" x-data="users_data">
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>Created At</th>
            <th>Updated At</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Tutorials</th>
            <th>Courses</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <template x-for="user in users">
            <tr>
              <td x-text="user.id"></td>
              <td x-text="user.createdAt"></td>
              <td x-text="user.updatedAt"></td>
              <td x-text="user.firstName"></td>
              <td x-text="user.lastName"></td>
              <td><a href="/admin/tutorials?author=INSERT_USER_ID" x-text="user.tutorials"></a></td>
              <td><a href="/admin/courses?author=INSERT_USER_ID" x-text="user.courses"></a></td>
              <td><button class="btn btn-red shadow-sm" x-on:click="openModal(user.firstName, user.lastName, user.id)">Remove Author</button></td>
            </tr>
          </template>
        </tbody>
      </table>

      <template x-teleport="body">
        <section class="admin-modal" x-show="modalOpen">
          <div class="admin-modal-container shadow-sm">
            <div class="admin-modal-header">
              <h2>Remove <span x-text="selectedFirstName"></span> <span x-text="selectedLastName"></span>'s Author Status</h2>

              <p>By removing the user's author status all their tutorials and courses will be set to unpublished and will no longer be listed.</p>
            </div>

            <div class="admin-modal-body">
              <form action="/">
                <div class="admin-modal-actions">
                  <button
                    x-on:click.prevent="modalOpen = false"
                    class="btn btn-gray shadow-sm"
                  >
                    Cancel
                  </button>

                  <button type="submit" class="btn btn-red shadow-sm">Remove Author Status</button>
                </div>
              </form>
            </div>
          </div>
        </section>
      </template>
    </div>
  </section>
{{ end }}

{{ define "javascript" }}
  <script>
    document.addEventListener("alpine:init", () => {
      Alpine.data('users_data', () => ({
        modalOpen: false,
        users: [
          {
            id: "01A8E54F1RYQJYQGF4ZTWM16V8",
            createdAt: "2023-01-15",
            updatedAt: "2023-02-01",
            firstName:  "John",
            lastName:  "Doe",
            tutorials: 13,
            courses: 35
          },
          {
            id: "01A8E8J7E2YMG98NKF3TQ84G1H",
            createdAt: "2023-03-12",
            updatedAt: "2023-03-27",
            firstName:  "Jane",
            lastName:  "Smith",
            tutorials: 76,
            courses: 54
          },
          {
            id: "01A8EC3WZ4FJYP62PG6T0M5CBX",
            createdAt: "2023-04-03",
            updatedAt: "2023-04-22",
            firstName: "Michael",
            lastName: "Johnson",
            tutorials: 17,
            courses: 54
          },
          {
            id: "01A8F2QW0ZGM3WXNQHC9R1SVDN",
            createdAt: "2023-05-10",
            updatedAt: "2023-06-01",
            firstName: "Emily",
            lastName: "Brown",
            tutorials: 73,
            courses: 86
          },
          {
            id: "01A8F8YRQ7JQF8X0XCHN5WT4F9",
            createdAt: "2023-06-15",
            updatedAt: "2023-07-05",
            firstName: "Chris",
            lastName: "Davis",
            tutorials: 20,
            courses: 85
          },
          {
            id: "01A8FESM8ZGFKP0YQDJ2XN9HJB",
            createdAt: "2023-07-18",
            updatedAt: "2023-08-08",
            firstName: "Sarah",
            lastName: "Miller",
            tutorials: 85,
            courses: 52
          },
          {
            id: "01A8FTM3XMKZ6C8N0V6SD3ZYND",
            createdAt: "2023-08-10",
            updatedAt: "2023-08-25",
            firstName: "James",
            lastName: "Wilson",
            tutorials: 12,
            courses: 35
          },
          {
            id: "01A8FXV0Q6P9Z9FJKM2TB8WQH4",
            createdAt: "2023-09-12",
            updatedAt: "2023-10-01",
            firstName: "Amanda",
            lastName: "Taylor",
            tutorials: 83,
            courses: 96
          },
          {
            id: "01A8G2ZV7FGRX8ZQCBYKW5TY2L",
            createdAt: "2023-10-07",
            updatedAt: "2023-10-22",
            firstName: "David",
            lastName: "Anderson",
            tutorials: 13,
            courses: 35
          },
          {
            id: "01A8G6XDRKJ8C3R1ZJN4Y2Q6P5",
            createdAt: "2023-10-20",
            updatedAt: "2023-11-05",
            firstName: "Laura",
            lastName: "Thomas",
            tutorials: 18,
            courses: 15
          },
          {
            id: "01A8G9WEFK9ZMQ6JV8L9Z6C7QD",
            createdAt: "2023-11-10",
            updatedAt: "2023-11-30",
            firstName: "Brian",
            lastName: "Jackson",
            tutorials: 73,
            courses: 95
          },
          {
            id: "01A8GJMW6P4H9F8WZJ6H5TL0YV",
            createdAt: "2023-11-20",
            updatedAt: "2023-12-01",
            firstName: "Jessica",
            lastName: "White",
            tutorials: 13,
            courses: 35
          },
          {
            id: "01A8GLY9FT8MW8ZJ3NQ6ZYJVDX",
            createdAt: "2023-12-03",
            updatedAt: "2023-12-12",
            firstName: "Oliver",
            lastName: "Lee",
            tutorials: 53,
            courses: 65
          },
          {
            id: "01A8GP3V9DJQY6MW6F4H8R5DZT",
            createdAt: "2023-12-10",
            updatedAt: "2023-12-15",
            firstName: "Sophia",
            lastName: "Martinez",
            tutorials: 63,
            courses: 50
          },
          {
            id: "01A8GR5S1NZKW7TCQKH4G8V9PL",
            createdAt: "2023-12-15",
            updatedAt: "2023-12-20",
            firstName: "Daniel",
            lastName: "Lopez",
            tutorials: 13,
            courses: 69
          }
        ],
        selectedFirstName: "",
        selectedLastName: "",
        selectedID: "",

        openModal(firstName, lastName, id) {
          this.selectedFirstName = firstName;
          this.selectedLastName = lastName;
          this.selectedID = id;

          this.modalOpen = true;
        },

        closeModal() {
          this.selectedFirstName = "";
          this.selectedLastName = "";
          this.selectedID = "";

          this.modalOpen = false;
        }
      }));
    });
  </script>
{{ end }}
